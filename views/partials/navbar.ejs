<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <!-- Logo -->
        <a class="navbar-brand" href="/">
            GAMING
        </a>

        <!-- Navbar Toggler -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Navbar Links -->
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/products">Shop</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/featured">Featured</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/about">About</a>
                </li>
            </ul>

            <!-- Right Side Icons -->
            <div class="d-flex align-items-center">
                <!-- Search Form -->
                <form class="search-form d-flex me-3" onsubmit="handleSearch(event)">
                    <div class="input-group">
                        <input type="search" 
                               class="form-control" 
                               placeholder="Search products..." 
                               name="search"
                               aria-label="Search">
                        <button class="btn btn-outline-light" type="submit">
                            <i class="bi bi-search"></i>
                        </button>
                    </div>
                </form>

                <!-- Cart -->
                <div class="dropdown">
                    <button type="button" 
                            class="nav-icon position-relative dropdown-toggle border-0 bg-transparent">
                        <i class="bi bi-cart3"></i>
                        <% if (locals.user) { %>
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger cart-count"
                                  style="display: <%= user.cart.length ? 'block' : 'none' %>">
                                <%= user.cart.length %>
                            </span>
                        <% } %>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end cart-dropdown" style="width: 320px;">
                        <div class="p-3">
                            <h6 class="mb-3">Shopping Cart</h6>
                            <div class="cart-items">
                                <!-- Cart items will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- User Account -->
                <a href="<%= locals.user ? '/account' : '/users/login' %>" class="nav-icon ms-3">
                    <i class="bi bi-person"></i>
                </a>
            </div>
        </div>
    </div>
</nav>

<style>
.navbar {
    padding: 1rem 0;
    border-bottom: 1px solid rgba(255,255,255,0.1);
}

.navbar-brand {
    font-weight: bold;
    font-size: 1.5rem;
    letter-spacing: 1px;
}

.nav-link {
    color: rgba(255,255,255,0.8) !important;
    font-size: 0.95rem;
    padding: 0.5rem 1rem !important;
    transition: color 0.3s ease;
}

.nav-link:hover {
    color: #fff !important;
}

.nav-icon {
    color: rgba(255,255,255,0.8);
    font-size: 1.2rem;
    padding: 0.5rem;
    margin-left: 0.5rem;
    text-decoration: none;
    transition: color 0.3s ease;
}

.nav-icon:hover {
    color: #fff;
}

@media (max-width: 991.98px) {
    .navbar-collapse {
        padding: 1rem 0;
    }
    
    .d-flex {
        margin-top: 1rem;
        justify-content: center;
    }
}

.cart-dropdown {
    padding: 0;
    max-height: 400px;
    overflow-y: auto;
}

.cart-item-dropdown {
    padding: 0.5rem 1rem;
    border-bottom: 1px solid #eee;
}

.cart-item-dropdown:last-child {
    border-bottom: none;
}

.search-form .input-group {
    width: 300px;
}

.search-form input {
    background-color: rgba(255,255,255,0.1);
    border-color: rgba(255,255,255,0.1);
    color: #fff;
}

.search-form input::placeholder {
    color: rgba(255,255,255,0.6);
}

.search-form input:focus {
    background-color: #fff;
    color: #000;
}

.search-form .btn-outline-light:hover {
    background-color: rgba(255,255,255,0.1);
}

@media (max-width: 991.98px) {
    .search-form .input-group {
        width: 100%;
    }
}
</style>

<script>
    // Only keep the search functionality
    function handleSearch(e) {
        e.preventDefault();
        const searchInput = e.target.querySelector('input[name="search"]');
        const searchTerm = searchInput.value.trim();
        
        if (searchTerm) {
            window.location.href = `/products?search=${encodeURIComponent(searchTerm)}`;
        }
    }
</script> 